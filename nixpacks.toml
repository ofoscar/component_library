[providers.node]
version = "20.18.0"

[variables]
NODE_VERSION = "20.18.0"
NODE_ENV = "production"
NPM_CONFIG_PRODUCTION = "false"
PORT = "3000"

[phases.setup]
nixPkgs = ["nodejs_20", "npm"]

[phases.install]
dependsOn = ["setup"]
cmds = ["chmod +x railway-build.sh railway-start.sh"]

[phases.build]
dependsOn = ["install"]
cmds = ["./railway-build.sh"]

[start]
cmd = "./railway-start.sh"

[staticAssets]
"frontend/public" = "/"