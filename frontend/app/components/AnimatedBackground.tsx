'use client';

import React from 'react';

interface AnimatedBackgroundProps {
  className?: string;
  children?: React.ReactNode;
}

export const AnimatedBackground: React.FC<AnimatedBackgroundProps> = ({
  className = '',
  children,
}) => {
  return (
    <div className={`relative overflow-hidden ${className}`}>
      <iframe
        src='data:text/html;base64,PGh0bWw+CiAgICAgICAgPGhlYWQ+CiAgICAgICAgICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSI+CiAgICAgICAgICAgIDxzdHlsZT4KICAgICAgICAgICAgICAgIGh0bWwsIGJvZHl7CiAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiAwOwogICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOwogICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgPC9zdHlsZT4KICAgICAgICAgICAgPHNjcmlwdCBzcmM9Imh0dHBzOi8vdW5wa2cuY29tL21lZGlhLXNoYWRlckBsYXRlc3QvbWVkaWEtc2hhZGVyLmpzIj48L3NjcmlwdD4KICAgIDxtZWRpYS1zaGFkZXIKICAgICAgICB3aWR0aD0iMTAyNHB4IiAKICAgICAgICBoZWlnaHQ9IjEwMjRweCIKICAgICAgICBmcmFnbWVudC1zaGFkZXI9JyN2ZXJzaW9uIDMwMCBlcwogICAgcHJlY2lzaW9uIGhpZ2hwIGZsb2F0OwogICAgb3V0IHZlYzQgZ2xGcmFnQ29sb3I7CiAgICB1bmlmb3JtIHZlYzIgdV9yZXNvbHV0aW9uOwp1bmlmb3JtIGZsb2F0IHVfdGltZTsKdW5pZm9ybSB2ZWM0IHVfYmFja2dyb3VuZDsKdW5pZm9ybSB2ZWMzIHVfY29sb3I7CnVuaWZvcm0gZmxvYXQgdV9zcGVlZDsKdW5pZm9ybSBmbG9hdCB1X2RldGFpbDsKbWF0MiBtKGZsb2F0IGEpIHsKICAgIGZsb2F0IGM9Y29zKGEpLCBzPXNpbihhKTsKICAgIHJldHVybiBtYXQyKGMsLXMscyxjKTsKfQojaWZuZGVmIEZOQ19SR0IyTFVNQQojZGVmaW5lIEZOQ19SR0IyTFVNQQpmbG9hdCByZ2IybHVtYShpbiB2ZWMzIGNvbG9yKSB7CiAgICByZXR1cm4gZG90KGNvbG9yLCB2ZWMzKDAuMjk5LCAwLjU4NywgMC4xMTQpKTsKfQpmbG9hdCByZ2IybHVtYShpbiB2ZWM0IGNvbG9yKSB7CiAgICByZXR1cm4gcmdiMmx1bWEoY29sb3IucmdiKTsKfQojZW5kaWYKI2lmbmRlZiBGTkNfTFVNQQojZGVmaW5lIEZOQ19MVU1BCmZsb2F0IGx1bWEoZmxvYXQgdikgeyByZXR1cm4gdjsgfQpmbG9hdCBsdW1hKGluIHZlYzMgdikgeyByZXR1cm4gcmdiMmx1bWEodik7IH0KZmxvYXQgbHVtYShpbiB2ZWM0IHYpIHsgcmV0dXJuIHJnYjJsdW1hKHYucmdiKTsgfQojZW5kaWYKZmxvYXQgbWFwKHZlYzMgcCkgewogICAgZmxvYXQgdCA9IHVfdGltZSAqIHVfc3BlZWQ7CiAgICBwLnh6ICo9IG0odCAqIDAuNCk7cC54eSo9IG0odCAqIDAuMSk7CiAgICB2ZWMzIHEgPSBwICogMi4wICsgdDsKICAgIHJldHVybiBsZW5ndGgocCt2ZWMzKHNpbigodCp1X3NwZWVkKSAqIDAuMSkpKSAqIGxvZyhsZW5ndGgocCkgKyAwLjkpICsgY29zKHEueCArIHNpbihxLnogKyBjb3MocS55KSkpICogMC41IC0gMS4wOwp9CnZvaWQgbWFpbigpIHsKICAgIHZlYzIgYSA9IGdsX0ZyYWdDb29yZC54eSAvIHVfcmVzb2x1dGlvbi54IC0gdmVjMigwLjUsIDAuNSk7CiAgICB2ZWMzIGNsID0gdmVjMygwLjApOwogICAgZmxvYXQgZCA9IDIuNTsKICAgIGZvciAoZmxvYXQgaSA9IDAuOyBpIDw9ICgxLiArIDIwLiAqIHVfZGV0YWlsKTsgaSsrKSB7CiAgICAgICAgdmVjMyBwID0gdmVjMygwLCAwLCA0LjApICsgbm9ybWFsaXplKHZlYzMoYSwgLTEuMCkpICogZDsKICAgICAgICBmbG9hdCByeiA9IG1hcChwKTsKICAgICAgICBmbG9hdCBmID0gIGNsYW1wKChyeiAtIG1hcChwICsgMC4xKSkgKiAwLjUsIC0wLjEsIDEuMCk7CiAgICAgICAgdmVjMyBsID0gdmVjMygwLjEsIDAuMywgMC40KSArIHZlYzMoNS4wLCAyLjUsIDMuMCkgKiBmOwogICAgICAgIGNsID0gY2wgKiBsICsgc21vb3Roc3RlcCgyLjUsIDAuMCwgcnopICogMC42ICogbDsKICAgICAgICBkICs9IG1pbihyeiwgMS4wKTsKICAgIH0KICAgIHZlYzQgY29sb3IgPSB2ZWM0KG1pbih1X2NvbG9yLCBjbCksMS4wKTsKICAgIGNvbG9yLnIgPSBtYXgodV9iYWNrZ3JvdW5kLnIsY29sb3Iucik7CiAgICBjb2xvci5nID0gbWF4KHVfYmFja2dyb3VuZC5nLGNvbG9yLmcpOwogICAgY29sb3IuYiA9IG1heCh1X2JhY2tncm91bmQuYixjb2xvci5iKTsKICAgIGdsRnJhZ0NvbG9yID0gY29sb3I7Cn0nCiAgICAgICAgdW5pZm9ybXM9J3sidV9iYWNrZ3JvdW5kIjpbMCwwLDAsMV0sInVfY29sb3IiOlswLjUxNzY0NzA1ODgyMzUyOTUsMC4wNjY2NjY2NjY2NjY2NjY2NywwLjA3NDUwOTgwMzkyMTU2ODYzXSwidV9zcGVlZCI6MC4xLCJ1X2RldGFpbCI6MC4yNzZ9Jz4KICAgIDwvbWVkaWEtc2hhZGVyPgogICAgICAgIDwvaGVhZD4KICAgICAgICA8Ym9keT48L2JvZHk+CiAgICAgICAgPC9odG1sPg=='
        className='absolute inset-0 w-full h-full'
        style={{
          border: 0,
          margin: 0,
          pointerEvents: 'none',
        }}
        title='Animated shader background'
      />
      <div className='relative z-10'>{children}</div>
    </div>
  );
};

export default AnimatedBackground;
